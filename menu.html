<!DOCTYPE html>
<html>
<head>
	<title>Menu</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<button class="expandible" type="button">Content<br>Map<br>>></button>

<ol class="menu">
<li><a href="#dom">Understanding the Document Object Model (DOM)</a></li>
<li>
	<a href="#select">DOM Element Selection</a>
	<ul class="subMenu">
		<li><a href="#">sub item 1</a></li>
		<li><a href="#">sub item 2</a></li>
	</ul>
</li>
<li>
	<a href="#modify">Modifying Attributes, Classes, and HTML</a>
	<ul class="subMenu">
		<li><a href="#">sub item 1</a></li>
		<li><a href="#">sub item 2</a></li>
	</ul>
</li>
<li><a href="#styling">Element Styling</a></li>
<li><a href="#node">DOM Node Modification</a></li>
<li><a href="#summary">Summary</a></li>
</ol>



<script type="text/javascript">
	
const ex = document.querySelector('.expandible');
const menu = document.querySelector('.menu');
const listClass = document.querySelector('.menu > li');

const listArray = [...document.querySelectorAll('.menu > li')];
let sum = 0;
listArray.forEach(item => sum += item.scrollHeight);

const extraSpace = parseFloat(getComputedStyle(ex).getPropertyValue('height')) +
parseFloat(getComputedStyle(listClass).getPropertyValue('margin'))*listArray.length;

document.documentElement.style.setProperty('--menuHeight',sum+extraSpace+'px');

function controlMenu(){
  menu.classList.toggle("popup");
}

ex.addEventListener("click", controlMenu);



const subMenu = document.getElementsByClassName("subMenu");

for (let i = 0; i < subMenu.length; i++) {
  	subMenu[i].parentElement.addEventListener("click", function() {
		if (subMenu[i].style.maxHeight){
		  subMenu[i].style.maxHeight = null;
		} else {
		  subMenu[i].style.maxHeight = subMenu[i].scrollHeight + "px";
		}   
  });
}

</script>

</body>
</html>